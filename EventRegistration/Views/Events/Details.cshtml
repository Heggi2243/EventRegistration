@model EventRegistration.Models.Event

@{
    ViewData["Title"] = "活動詳情";
    var totalRegistered = ViewBag.TotalRegistered ?? 0;
    var remainingSeats = Model.MaxParticipants - totalRegistered;
}

<div class="row">
    <div class="col-lg-8 mx-auto">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h3 class="mb-0">@Model.EventName</h3>
            </div>
            <div class="card-body">
                <dl class="row">
                    <dt class="col-sm-3">活動類型</dt>
                    <dd class="col-sm-9">
                        <span class="badge bg-info text-dark fs-6">@Model.EventType</span>
                    </dd>

                    <dt class="col-sm-3">活動日期</dt>
                    <dd class="col-sm-9">
                        @Model.StartDate.ToString("yyyy年 MM月 dd日")
                        @if (Model.StartDate != Model.EndDate)
                        {
                            <text> ~ @Model.EndDate.ToString("yyyy年 MM月 dd日")</text>
                        }
                    </dd>

                    <dt class="col-sm-3">人數上限</dt>
                    <dd class="col-sm-9">@Model.MaxParticipants 人</dd>

                    <dt class="col-sm-3">已報名</dt>
                    <dd class="col-sm-9">
                        <strong class="text-primary">@totalRegistered</strong> 人
                    </dd>

                    <dt class="col-sm-3">剩餘名額</dt>
                    <dd class="col-sm-9">
                        <strong class="@(remainingSeats > 10 ? "text-success" : "text-danger")">
                            @remainingSeats
                        </strong> 人
                    </dd>
                </dl>

                <hr />

                @if (remainingSeats > 0)
                {
                    <div class="d-grid gap-2">
                        <a asp-controller="Registrations" asp-action="Create" asp-route-eventId="@Model.Id"
                           class="btn btn-success btn-lg">
                            立即報名
                        </a>
                    </div>
                }
                else
                {
                    <div class="alert alert-danger text-center" role="alert">
                        <h5>報名已額滿</h5>
                        <p class="mb-0">此活動已無剩餘名額</p>
                    </div>
                }

                <div class="mt-3">
                    <a asp-action="Index" class="btn btn-outline-secondary">
                        ← 返回活動列表
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>